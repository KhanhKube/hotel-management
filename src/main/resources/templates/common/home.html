<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Hotel</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="/img/favicon.png" type="image/png">
    <link rel="stylesheet" href="/vendors/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/vendors/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/vendors/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="/vendors/linericon/style.css">
    <link rel="stylesheet" href="/vendors/magnefic-popup/magnific-popup.css">
    <link rel="stylesheet" href="/vendors/owl-carousel/owl.theme.default.min.css">
    <link rel="stylesheet" href="/vendors/owl-carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="/vendors/nice-select/nice-select.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<!-- import header -->
<div th:replace="~{common/header :: header}"></div>

<!-- ================ start banner area ================= -->
<section class="home-banner-area" id="home">
    <div class="container h-100">
        <div class="home-banner">
            <div class="text-center">
                <h4>Xem sự khác biệt mà một kỳ nghỉ mang lại!</h4>
                <h1>Sang trọng <em>và</em> Riêng Tư</h1>
                <a class="button home-banner-btn" href="#">Đặt ngay</a>
            </div>
        </div>
    </div>
</section>
<!-- ================ end banner area ================= -->


<!-- ================ start banner form ================= -->
<!--<form class="form-search form-search-position">-->
<!--    <div class="container">-->
<!--        <div class="row">-->
<!--            <div class="col-lg-6 gutters-19">-->
<!--                <div class="form-group">-->
<!--                    <input class="form-control" type="text" placeholder="Enter your keywords.." required>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="col-lg-6 gutters-19">-->
<!--                <div class="row">-->
<!--                    <div class="col-sm">-->
<!--                        <div class="form-group">-->
<!--                            <div class="form-select-custom">-->
<!--                                <select name="" id="">-->
<!--                                    <option value="" disabled selected>Arrival</option>-->
<!--                                    <option value="8 AM">8 AM</option>-->
<!--                                    <option value="12 PM">12 PM</option>-->
<!--                                </select>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="col-sm gutters-19">-->
<!--                        <div class="form-group">-->
<!--                            <div class="form-select-custom">-->
<!--                                <select name="" id="">-->
<!--                                    <option value="" disabled selected>Number of room</option>-->
<!--                                    <option value="8 AM">8 AM</option>-->
<!--                                    <option value="12 PM">12 PM</option>-->
<!--                                </select>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="row">-->
<!--            <div class="col-sm gutters-19">-->
<!--                <div class="form-group">-->
<!--                    <div class="form-select-custom">-->
<!--                        <select name="" id="">-->
<!--                            <option value="" disabled selected>Departure</option>-->
<!--                            <option value="8 AM">8 AM</option>-->
<!--                            <option value="12 PM">12 PM</option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="col-sm gutters-19">-->
<!--                <div class="form-group">-->
<!--                    <div class="form-select-custom">-->
<!--                        <select name="" id="">-->
<!--                            <option value="" disabled selected>Adult</option>-->
<!--                            <option value="8 AM">8 AM</option>-->
<!--                            <option value="12 PM">12 PM</option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="col-sm gutters-19">-->
<!--                <div class="form-group">-->
<!--                    <div class="form-select-custom">-->
<!--                        <select name="" id="">-->
<!--                            <option value="" disabled selected>Child</option>-->
<!--                            <option value="8 AM">8 AM</option>-->
<!--                            <option value="12 PM">12 PM</option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="col-lg-4 gutters-19">-->
<!--                <div class="form-group">-->
<!--                    <button class="button button-form" type="submit">Check Availability</button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</form>-->
<!-- ================ end banner form ================= -->

<!-- ================ welcome section start ================= -->
<section class="welcome">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-5 mb-4 mb-lg-0">
                <div class="row no-gutters welcome-images">
                    <div class="col-sm-7">
                        <div class="card">
                            <img class="" src="/img/home/welcomeBanner1.png" alt="Card image cap">
                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="card">
                            <img class="" src="/img/home/welcomeBanner2.png" alt="Card image cap">
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="card">
                            <img class="" src="/img/home/welcomeBanner3.png" alt="Card image cap">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="welcome-content">
                    <h2 class="mb-4"><span class="d-block">Chào mừng</span> đến với nơi ở của chúng tôi</h2>
                    <p>Buổi ban đầu an lành khẽ trôi đến. Trong cõi thẳm sâu, Nơi có cá, có năm tháng, có khí trời tươi tốt, Hạt mầm hiện ra giữa hoàng hôn.

                        Hư không xuất hiện, Mang đến lần sinh thứ ba, Chia tách một đấng toàn năng, Vòm trời lay động, rồi hợp nhất. </p>

                    <a class="button button--active home-banner-btn mt-4" href="#">Tìm hiểu thêm</a>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ welcome section end ================= -->


<!-- ================ Explore section start ================= -->
<section class="section-margin">
    <div class="container">
        <div class="section-intro text-center pb-80px">
            <div class="section-intro__style">
                <img src="/img/home/bed-icon.png" alt="">
            </div>
            <h2>Khám phá phòng của chúng tôi</h2>
        </div>

        <div class="row">
            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4 mb-lg-0" th:each="r : ${rooms}">
                    <div class="card card-explore">
                        <div class="card-explore__img">
                            <img class="card-img" th:src="${r.imageRoom != null ? r.imageRoom : '/images/room/room-01.png'}" alt="">
                        </div>
                        <div class="card-body">
                            <h3 class="card-explore__price" th:text="${#numbers.formatInteger(r.price.intValue(), 3, 'POINT')} + ' VNĐ'">350.000 <sub>/ Ngày</sub></h3>
                            <h4 class="card-explore__title">
                                <a th:text="${r.roomType}" th:href="@{/hotel/room/{id}(id=${r.roomId})}">Classic Bed Room</a>
                            </h4>
                            <p th:text="${r.roomDescription}">Room description</p>
                            <a class="card-explore__link" th:href="@{/hotel/room/{id}(id=${r.roomId})}">
                                Đặt ngay <i class="ti-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- If list empty -->
                <div class="col-12 text-center" th:if="${#lists.isEmpty(rooms)}">
                    <p class="text-muted">Hiện không có phòng nào.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ Explore section end ================= -->


<!-- ================ video section start ================= -->
<section class="video-area">
    <div class="container">
        <div class="row justify-content-center align-items-center flex-column text-center">
            <a id="play-home-video" class="video-play-button" href="https://www.youtube.com/watch?v=vParh5wE-tM">
                <span></span>
            </a>
            <h3>Nơi biển cả</h3>
            <p>Đàn ông có thấy tìm thấy tài năng nhút nhát thân yêu</p>
        </div>
    </div>
</section>
<!-- ================ video section end ================= -->

<!-- ================ special section start ================= -->
<section class="section-padding bg-porcelain">
    <div class="container">
        <div class="section-intro text-center pb-80px">
            <div class="section-intro__style">
                <img src="img/home/bed-icon.png" alt="">
            </div>
            <h2>Tiện nghi đặc biệt</h2>
        </div>
        <div class="special-img mb-30px">
            <img class="img-fluid" src="img/home/special.png" alt="">
        </div>

        <div class="row">
            <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                <div class="card card-special">
                    <div class="media align-items-center mb-1">
                        <span class="card-special__icon"><i class="ti-home"></i></span>
                        <div class="media-body">
                            <h4 class="card-special__title">Phòng họp</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>Không gian kín đáo</p>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                <div class="card card-special">
                    <div class="media align-items-center mb-1">
                        <span class="card-special__icon"><i class="ti-bell"></i></span>
                        <div class="media-body">
                            <h4 class="card-special__title">Bể bơi</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>Thoả sức vui chơi</p>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                <div class="card card-special">
                    <div class="media align-items-center mb-1">
                        <span class="card-special__icon"><i class="ti-car"></i></span>
                        <div class="media-body">
                            <h4 class="card-special__title">Phòng thể thao</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>Tập luyện ngay cả trong kì nghỉ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ special section end ================= -->

<!-- ================ carousel section start ================= -->
<section class="section-margin">
    <div class="container">
        <div class="section-intro text-center pb-20px">
            <div class="section-intro__style">
                <img src="img/home/bed-icon.png" alt="">
            </div>
            <h2>Khách của chúng tôi</h2>
        </div>
        <div class="owl-carousel owl-theme testi-carousel">
            <div class="testi-carousel__item">
                <div class="media">
                    <div class="testi-carousel__img">
                        <img src="img/home/testimonial1.png" alt="">
                    </div>
                    <div class="media-body">
                        <p>Incidunt deleniti blanditiis quas aperiam recusandae consillo ullam quibusdam cum libero illo
                            repell endus!</p>
                        <div class="testi-carousel__intro">
                            <h3>Robert Mack</h3>
                            <p>CEO & Founder</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testi-carousel__item">
                <div class="media">
                    <div class="testi-carousel__img">
                        <img src="img/home/testimonial3.png" alt="">
                    </div>
                    <div class="media-body">
                        <p>Incidunt deleniti blanditiis quas aperiam recusandae consillo ullam quibusdam cum libero illo
                            repell endus!</p>
                        <div class="testi-carousel__intro">
                            <h3>Adam Pallin</h3>
                            <p>CEO & Founder</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testi-carousel__item">
                <div class="media">
                    <div class="testi-carousel__img">
                        <img src="img/home/testimonial1.png" alt="">
                    </div>
                    <div class="media-body">
                        <p>Incidunt deleniti blanditiis quas aperiam recusandae consillo ullam quibusdam cum libero illo
                            repell endus!</p>
                        <div class="testi-carousel__intro">
                            <h3>Robert Mack</h3>
                            <p>CEO & Founder</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testi-carousel__item">
                <div class="media">
                    <div class="testi-carousel__img">
                        <img src="img/home/testimonial2.png" alt="">
                    </div>
                    <div class="media-body">
                        <p>Incidunt deleniti blanditiis quas aperiam recusandae consillo ullam quibusdam cum libero illo
                            repell endus!</p>
                        <div class="testi-carousel__intro">
                            <h3>David Alone</h3>
                            <p>CEO & Founder</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="testi-carousel__item">
                <div class="media">
                    <div class="testi-carousel__img">
                        <img src="img/home/testimonial3.png" alt="">
                    </div>
                    <div class="media-body">
                        <p>Incidunt deleniti blanditiis quas aperiam recusandae consillo ullam quibusdam cum libero illo
                            repell endus!</p>
                        <div class="testi-carousel__intro">
                            <h3>Adam Pallin</h3>
                            <p>CEO & Founder</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ carousel section end ================= -->


<!-- ================ news section start ================= -->
<section class="section-margin">
    <div class="container">
        <div class="section-intro text-center pb-80px">
            <div class="section-intro__style">
                <img src="img/home/bed-icon.png" alt="">
            </div>
            <h2>Tin tức & Sự kiện</h2>
        </div>

        <div class="row">
            <div class="col-md-6 col-lg-4 mb-4 mb-md-0">
                <div class="card card-news">
                    <div class="card-news__img">
                        <img class="card-img" src="img/home/explore1.png" alt="">
                    </div>
                    <div class="card-body">
                        <h4 class="card-news__title"><a href="#">Các công ty khách sạn đã thay đổi cán cân</a></h4>
                        <ul class="card-news__info">
                            <li><a href="#"><span class="news-icon"><i class="ti-notepad"></i></span> 20th Nov, 2018</a>
                            </li>
                            <li><a href="#"><span class="news-icon"><i class="ti-comment"></i></span> 03 Comments</a>
                            </li>
                        </ul>
                        <p>Not thoughts all exercise blessing Indulgence way everything joy alteration boisterous the
                            attachment party we years to order</p>
                        <a class="card-news__link" href="#">Read More <i class="ti-arrow-right"></i></a>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-4 mb-4 mb-md-0">
                <div class="card card-news">
                    <div class="card-news__img">
                        <img class="card-img" src="img/home/explore2.png" alt="">
                    </div>
                    <div class="card-body">
                        <h4 class="card-news__title"><a href="#">Hãy thử sức với trò chơi ô chữ khai mạc ngành công nghiệp</a></h4>
                        <ul class="card-news__info">
                            <li><a href="#"><span class="news-icon"><i class="ti-notepad"></i></span> 20th Nov, 2018</a>
                            </li>
                            <li><a href="#"><span class="news-icon"><i class="ti-comment"></i></span> 03 Comments</a>
                            </li>
                        </ul>
                        <p>Not thoughts all exercise blessing Indulgence way everything joy alteration boisterous the
                            attachment party we years to order</p>
                        <a class="card-news__link" href="#">Read More <i class="ti-arrow-right"></i></a>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-4 mb-4 mb-md-0">
                <div class="card card-news">
                    <div class="card-news__img">
                        <img class="card-img" src="img/home/explore3.png" alt="">
                    </div>
                    <div class="card-body">
                        <h4 class="card-news__title"><a href="#">Các chủ khách sạn quyết tâm đầu tư vào khách hàng</a></h4>
                        <ul class="card-news__info">
                            <li><a href="#"><span class="news-icon"><i class="ti-notepad"></i></span> 20th Nov, 2018</a>
                            </li>
                            <li><a href="#"><span class="news-icon"><i class="ti-comment"></i></span> 03 Comments</a>
                            </li>
                        </ul>
                        <p>Not thoughts all exercise blessing Indulgence way everything joy alteration boisterous the
                            attachment party we years to order</p>
                        <a class="card-news__link" href="#">Read More <i class="ti-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ================ news section end ================= -->

</main>
<!-- import footer -->
<div th:replace="~{common/footer :: footer}"></div>

<!-- import AI Chat Widget -->
<div th:replace="~{ai/ai-chat-widget :: aiChatWidget}"></div>
<button id="aiChatButton" onclick="toggleAIChat()">
    <span class="chat-icon">💬</span>
    <span class="ai-badge">AI</span>
</button>

<!-- AI Chat Widget -->
<div id="aiChatWidget">
    <!-- Header -->
    <div class="chat-header">
        <div class="chat-header-content">
            <div class="chat-avatar">🤖</div>
            <div class="chat-header-text">
                <div class="chat-title">AI Trợ Lý Đặt Phòng</div>
                <div class="chat-subtitle">Tìm phòng phù hợp cho bạn</div>
            </div>
        </div>
        <button class="chat-close-btn" onclick="toggleAIChat()">×</button>
    </div>
    
    <!-- Chat Messages Area -->
    <div id="chatArea" class="chat-messages">
        <div id="welcomeMsg" class="welcome-message">
            <div class="welcome-icon">👋</div>
            <div class="welcome-title">Xin chào!</div>
            <div class="welcome-text">Tôi là trợ lý AI của khách sạn. Hãy cho tôi biết bạn đang tìm loại phòng nào?</div>
            <div class="welcome-examples">
                <div class="example-chip" onclick="sendExampleMessage('Tôi muốn phòng VIP')">Phòng VIP</div>
                <div class="example-chip" onclick="sendExampleMessage('Tìm phòng giá rẻ')">Phòng giá rẻ</div>
                <div class="example-chip" onclick="sendExampleMessage('Phòng Deluxe')">Phòng Deluxe</div>
            </div>
        </div>
    </div>
    
    <!-- Input Area -->
    <div class="chat-input-area">
        <input type="text" id="chatInput" placeholder="Nhập yêu cầu của bạn..." onkeypress="handleKeyPress(event)">
        <button class="chat-send-btn" onclick="sendMessage()">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </button>
    </div>
</div>

<style>
    /* Chat Button */
    #aiChatButton {
        position: fixed !important;
        bottom: 30px !important;
        right: 30px !important;
        width: 60px !important;
        height: 60px !important;
        border-radius: 50% !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        display: flex !important;
        border: none;
        box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
        cursor: pointer;
        z-index: 9999;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        animation: pulse 2s infinite;
    }
    
    #aiChatButton:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6);
    }
    
    .chat-icon {
        font-size: 28px;
    }
    
    .ai-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff4757;
        color: white;
        font-size: 10px;
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);
    }
    
    @keyframes pulse {
        0%, 100% {
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
        }
        50% {
            box-shadow: 0 4px 30px rgba(102, 126, 234, 0.7);
        }
    }
    
    /* Chat Widget */
    #aiChatWidget {
        display: none;
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 380px;
        height: 550px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        z-index: 9998;
        flex-direction: column;
        overflow: hidden;
        animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Chat Header */
    .chat-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 16px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .chat-header-content {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .chat-avatar {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
    }
    
    .chat-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 2px;
    }
    
    .chat-subtitle {
        font-size: 12px;
        opacity: 0.9;
    }
    
    .chat-close-btn {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 24px;
        line-height: 1;
        transition: all 0.2s;
    }
    
    .chat-close-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
    }
    
    /* Chat Messages */
    .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        background: #f8f9fa;
    }
    
    .chat-messages::-webkit-scrollbar {
        width: 6px;
    }
    
    .chat-messages::-webkit-scrollbar-thumb {
        background: #cbd5e0;
        border-radius: 3px;
    }
    
    /* Welcome Message */
    .welcome-message {
        text-align: center;
        padding: 20px;
    }
    
    .welcome-icon {
        font-size: 48px;
        margin-bottom: 12px;
    }
    
    .welcome-title {
        font-size: 20px;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 8px;
    }
    
    .welcome-text {
        font-size: 14px;
        color: #718096;
        line-height: 1.5;
        margin-bottom: 16px;
    }
    
    .welcome-examples {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
        margin-top: 16px;
    }
    
    .example-chip {
        background: white;
        border: 1px solid #e2e8f0;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 13px;
        color: #667eea;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .example-chip:hover {
        background: #667eea;
        color: white;
        border-color: #667eea;
        transform: translateY(-2px);
    }
    
    /* Chat Message Bubbles */
    .chat-message {
        margin-bottom: 16px;
        display: flex;
        gap: 8px;
        animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .chat-message.user {
        justify-content: flex-end;
    }
    
    .message-bubble {
        max-width: 75%;
        padding: 12px 16px;
        border-radius: 16px;
        font-size: 14px;
        line-height: 1.5;
        word-wrap: break-word;
    }
    
    .chat-message.bot .message-bubble {
        background: white;
        color: #2d3748;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border-bottom-left-radius: 4px;
    }
    
    .chat-message.user .message-bubble {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-bottom-right-radius: 4px;
    }
    
    .message-bubble strong {
        display: block;
        margin-bottom: 4px;
    }
    
    .message-bubble a {
        color: #667eea;
        text-decoration: none;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        margin-top: 8px;
        transition: all 0.2s;
    }
    
    .chat-message.user .message-bubble a {
        color: white;
        text-decoration: underline;
    }
    
    .message-bubble a:hover {
        opacity: 0.8;
    }
    
    /* Chat Input */
    .chat-input-area {
        padding: 16px;
        background: white;
        border-top: 1px solid #e2e8f0;
        display: flex;
        gap: 8px;
    }
    
    #chatInput {
        flex: 1;
        padding: 12px 16px;
        border: 1px solid #e2e8f0;
        border-radius: 24px;
        font-size: 14px;
        outline: none;
        transition: all 0.2s;
    }
    
    #chatInput:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .chat-send-btn {
        width: 44px;
        height: 44px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        flex-shrink: 0;
    }
    
    .chat-send-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .chat-send-btn:active {
        transform: scale(0.95);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        #aiChatWidget {
            width: calc(100vw - 40px);
            height: calc(100vh - 140px);
            right: 20px;
            bottom: 100px;
        }
        
        #aiChatButton {
            right: 20px;
            bottom: 20px;
        }
    }
</style>

<script>
    let isChatOpen = false;
    
    function toggleAIChat() {
        const widget = document.getElementById('aiChatWidget');
        isChatOpen = !isChatOpen;
        widget.style.display = isChatOpen ? 'flex' : 'none';
        
        if (isChatOpen) {
            document.getElementById('chatInput').focus();
        }
    }
    
    function addMessage(text, isUser) {
        const chatArea = document.getElementById('chatArea');
        const welcome = document.getElementById('welcomeMsg');
        if (welcome) welcome.remove();
        
        const msg = document.createElement('div');
        msg.className = 'chat-message ' + (isUser ? 'user' : 'bot');
        msg.innerHTML = '<div class="message-bubble">' + text + '</div>';
        chatArea.appendChild(msg);
        chatArea.scrollTop = chatArea.scrollHeight;
    }
    
    function sendMessage() {
        const input = document.getElementById('chatInput');
        const text = input.value.trim();
        if (!text) return;
        
        addMessage(text, true);
        input.value = '';
        
        setTimeout(() => processMessage(text), 500);
    }
    
    function sendExampleMessage(text) {
        document.getElementById('chatInput').value = text;
        sendMessage();
    }
    
    function handleKeyPress(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    }
    
    function processMessage(text) {
        fetch('/hotel-management/room/search', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ query: text })
        })
            .then(res => res.json())
            .then(data => {
                const roomIds = data.data || [];
                
                if (roomIds.length === 0) {
                    addMessage('Xin lỗi, không tìm thấy phòng phù hợp với yêu cầu "' + text + '". Bạn có thể thử tìm kiếm khác!', false);
                    return;
                }
                
                addMessage('Tôi đã tìm thấy ' + roomIds.length + ' phòng phù hợp với yêu cầu của bạn:', false);
                
                roomIds.forEach((roomId, i) => {
                    setTimeout(() => {
                        const link = '/hotel/room/' + roomId;
                        const html = '<strong>Phòng #' + roomId + '</strong><br>' +
                                    '<a href="' + link + '" target="_blank">👉 Xem chi tiết và đặt phòng</a>';
                        addMessage(html, false);
                    }, i * 300);
                });
            })
            .catch(err => {
                console.error('Error:', err);
                addMessage('Xin lỗi, có lỗi xảy ra khi tìm kiếm. Vui lòng thử lại!', false);
            });
    }
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && isChatOpen) {
            toggleAIChat();
        }
    });
</script>

<script src="/vendors/jquery/jquery-3.2.1.min.js"></script>
<script src="/vendors/bootstrap/bootstrap.bundle.min.js"></script>
<script src="/vendors/magnefic-popup/jquery.magnific-popup.min.js"></script>
<script src="/vendors/owl-carousel/owl.carousel.min.js"></script>
<script src="/vendors/easing.min.js"></script>
<script src="/vendors/superfish.min.js"></script>
<script src="/vendors/nice-select/jquery.nice-select.min.js"></script>
<script src="/vendors/jquery.ajaxchimp.min.js"></script>
<script src="/vendors/mail-script.js"></script>
<script src="/js/main.js"></script>
</body>
</html>